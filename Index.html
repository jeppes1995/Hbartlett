<!DOCTYPE html>
<html lang="da"> <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mine skriv - en digital journal</title> <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Brugerdefinerede Styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* En blød, neutral baggrund */
            color: #333;
            text-transform: lowercase; /* Gør al tekst til små bogstaver */
        }

        .font-playfair {
            font-family: 'Playfair Display', serif;
        }

        /* Brugerdefineret skarp skygge til noter & modal */
        .note-shadow {
            box-shadow: 6px 6px 0px #1a202c;
        }
      
        /* Bløde overgange for hover-effekter */
        .note {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            cursor: pointer;
            overflow: hidden; 
            max-height: 180px; /* Indledende maksimal højde for snippet-visning */
        }

        /* Kombineret hover-effekt: voks og skift skygge - gælder for snippet-visning */
        .note:hover { 
            transform: scale(1.03); /* Vokseffekt */
            box-shadow: 8px 8px 0px #2d3748; /* Mørkere/større skygge ved hover */
        }
        
        .note-snippet {
            padding-bottom: 1.25rem; 
        }

        /* Styling for tekstcontainere inden i noter for at håndtere tekstombrydning */
        .note-snippet p, 
        #modal-full-text div { /* Gælder også for modal-indhold */
            overflow-wrap: break-word; 
            word-wrap: break-word;     
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px); /* For Safari */
            z-index: 40;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none; /* Skjult som standard */
        }
        .modal-overlay.is-visible {
            opacity: 1;
            pointer-events: auto;
        }

        .modal-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            background-color: white;
            padding: 2rem; /* 32px */
            border-radius: 1rem; /* 16px */
            width: 90%; /* Responsiv bredde */
            max-width: 700px; /* Maksimal bredde for større skærme */
            max-height: 85vh; /* Maksimal højde for at forhindre overløb */
            overflow-y: auto; /* Scroll for langt indhold */
            z-index: 50;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            pointer-events: none; /* Skjult som standard */
        }
        .modal-container.is-visible {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        .modal-close-button {
            position: absolute;
            top: 1rem; /* 16px */
            right: 1.5rem; /* 24px */
            font-size: 2.25rem; /* 36px */
            font-weight: bold;
            color: #4a5568; /* gray-700 */
            cursor: pointer;
            line-height: 1;
            transition: color 0.2s ease-in-out;
        }
        .modal-close-button:hover {
            color: #1a202c; /* gray-900 */
        }

        .body-no-scroll {
            overflow: hidden;
        }
        
        /* Brugerdefineret scrollbar (valgfrit) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f0f2f5;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }

        /* Simpel fade-in animation for elementer */
        .fade-in {
            animation: fadeInAnimation 0.8s ease-in-out forwards;
            opacity: 0;
        }

        @keyframes fadeInAnimation {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Forskudt fade-in for noter - indledende tilstand for JS */
        .writings-grid .note, #featured-note { 
            opacity: 0; 
        }

    </style>
</head>
<body class="antialiased">

    <section class="py-16 md:py-24 bg-gradient-to-br from-slate-50 to-stone-100 fade-in" style="animation-delay: 0.2s;">
        <div class="container mx-auto px-6 text-center">
            <h1 class="font-playfair text-4xl md:text-6xl font-bold text-gray-800 mb-4">mine skriv</h1>
            <p class="text-lg md:text-xl text-gray-600 mb-10 max-w-2xl mx-auto">
                mine tanker, mine følelser, mit liv.
            </p>
            <div id="featured-note" class="note max-w-xl mx-auto bg-white p-8 rounded-2xl note-shadow transform">
                <div class="note-snippet">
                    <h3 class="font-playfair text-3xl font-semibold text-gray-800 mb-3" id="featured-title">indlæser fremhævet note...</h3>
                    <p class="text-gray-600 leading-relaxed text-sm" id="featured-snippet-text">
                        vent venligst...
                    </p>
                </div>
                <div class="hidden" id="featured-content-full-source"></div>
            </div>
        </div>
    </section>

    <main id="writings" class="py-16 md:py-20 container mx-auto px-6">
        <h2 class="font-playfair text-4xl md:text-5xl font-bold text-gray-800 text-center mb-16 fade-in" style="animation-delay: 0.4s;">
            læs her
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10 md:gap-12 writings-grid">
            </div>
    </main>

    <div id="note-modal-overlay" class="modal-overlay"></div>
    <div id="note-modal" class="modal-container note-shadow">
        <button id="modal-close-button" class="modal-close-button" aria-label="luk modal">&times;</button>
        <h2 id="modal-title" class="font-playfair text-3xl md:text-4xl font-semibold text-gray-800 mb-6">Modal Titel</h2>
        <div id="modal-full-text" class="text-gray-700 leading-loose text-base">
            </div>
    </div>


    <footer class="bg-gray-800 text-gray-300 py-12 fade-in" style="animation-delay: 0.6s;">
        <div class="container mx-auto px-6 text-center">
            <p class="font-playfair text-xl mb-2">&copy; <span id="currentYear"></span> jeppe hedegaard bartlett</p>
            <p class="text-sm">mine skriv</p>
            </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Data for Skriv (Brugerens Danske Tekst) ---
            const writingsData = [
                {
                    title: "ok",
                    fullText: "Jeg ser dig hver dag, En jakke, en cykelist, en stemme i det fjerne.  Mange ting minder om dig, Er det afsavnet?  Er det mit min samvittighed?  Er det dig?   Savn fortolkes, Savn overvejes, Tårer spildes,  Tårer grædes,  To sønner uden deres far, En far som altid har været der, En far som har lyttet, En far som har forstået, En far som har støttet,   Du er her ikke mere,  3 år er gået på få øjeblikke, Hvis 3 år kan forsvinde ved et knips, Hvad så med mit liv?  Hvad med mine døtre?  Når jeg at opdage, lære dem at kende,  opdrage dem, elske dem?  Jeg ser dig hver dag,  så hvorfor savner jeg dig så meget?  Hvordan kan jeg være fortabt, når jeg ikke ved hvor jeg skal hen? "
                },
                {
                    title: "ok2",
                    fullText: "Hvad sker der når vi dør? Bliver vi mødt? Bliver vi mødt af vores indre afsavn? Dem som vi ikke følte vi besøgte nok, Dem som vi ikke elskede nok, Dem som vi ikke kunne leve uden, Dem som vi nu kan være sammen med.  Men bliver vi accepteret?  Har de affundet sig ved døden?  Kan de leve med at du er ankommet?  Eller bliver der sort?  Sort. Ingenting. Nul.  Måske vi bliver mødt af det vi tror på, En gud, en filosofi, en tanke? Et familiemedlem. Lever vi videre i de levendes tanker?  Eller bliver vi glemt?   En ting er sikkert.  Taler vi aldrig om de døde, så bliver der sort.  Så kan vi ikke leve videre, så bliver vi glemt, og når man bliver glemt, er man ikke længere til.    Sort. Ingenting. Nul"
                },
                {
                    title: "ok3",
                    fullText: "Livet er og bliver svært, Det er svært at være til, Det er svært at kigge sig omkring,  Det er svært at kigge ind ad.  Fordi, kigger vi kun ud,  får vi så nogensinde styr, styr på os selv og vores egne problemer,  styr på os selv og vores egne mangler? vores egne fejl?   Men hvorfor er livet så svært?  Livet er som et korthus, det kan blives stort og smukt, men med et enkelt forkert pust, bum. Så er livet veltet, endt og gået.  og nåede du alt det du skulle mens du var her?  nåede du at elske? nåede du at blive elsket?  nåede du at finde ud af hvad du skulle mens du var her?  Nåede du at finde ud af hvorfor du var her?   Livet er svært, Der er mange spørgsmål der puster på ens korthus.  Hver eneste dag med frygt for at det vil falde. Og hvis det falder, er det så for sent at bygge det op på ny?  Meningen med det hele er nok at mestre,  mestre ikke at spekulere,  Ikke at spekulere om du var god nok, om andre synes du var god nok, eller om dine egne forventninger blev opfyldt,  Livet er svært,  men kan du tæmme spekulationens fangarme, kan det måske blive en smule lettere at være til,  i denne verden"
                }
                // Tilføj nye noter her ved at tilføje nye objekter til dette array
            ];

            // --- Modal Elementer ---
            const modalOverlay = document.getElementById('note-modal-overlay');
            const modalContainer = document.getElementById('note-modal');
            const modalTitleElement = document.getElementById('modal-title');
            const modalFullTextElement = document.getElementById('modal-full-text');
            const modalCloseButton = document.getElementById('modal-close-button');

            // --- Hjælpefunktion til at formatere tekst med linjeskift ---
            function formatTextWithLineBreaks(text) {
                if (!text) return '';
                let processedText = text;
                processedText = processedText.replace(/([,?!.])(\s*)/g, '$1<br>$2');
                processedText = processedText.replace(/<br>\s*<br>/gi, '<br>'); 
                return processedText;
            }

            // --- Hjælpefunktion til at oprette snippet ---
            function createSnippet(fullText, wordCount = 10, charLimit = 75) {
                const textOnly = fullText.replace(/<[^>]+>/g, ' ').replace(/\s+/g, ' ').trim();
                if (!textOnly) return ''; 
                const words = textOnly.split(' ');
                let needsEllipsis = false;
                let snippetWordsArray = words.slice(0, wordCount);
                let currentSnippet = snippetWordsArray.join(' ');
                if (words.length > wordCount) needsEllipsis = true;
                if (currentSnippet.length > charLimit) {
                    currentSnippet = currentSnippet.substring(0, charLimit);
                    needsEllipsis = true; 
                    const lastSpaceIndex = currentSnippet.lastIndexOf(' ');
                    if (lastSpaceIndex > 0 && currentSnippet.length === charLimit) { 
                        currentSnippet = currentSnippet.substring(0, lastSpaceIndex);
                    }
                }
                if (needsEllipsis) {
                    if (currentSnippet.endsWith('...')) return currentSnippet;
                    if (currentSnippet.endsWith('.') || currentSnippet.endsWith(',')) {
                        currentSnippet = currentSnippet.slice(0, -1);
                    }
                    return currentSnippet.trim() + '...'; 
                }
                return currentSnippet; 
            }

            // --- Funktion til at åbne Modal ---
            function openModal(title, fullText) {
                modalTitleElement.textContent = title;
                modalFullTextElement.innerHTML = `<div class="text-gray-700 leading-loose mt-4">${formatTextWithLineBreaks(fullText)}</div>`;
                modalOverlay.classList.add('is-visible');
                modalContainer.classList.add('is-visible');
                document.body.classList.add('body-no-scroll');
            }

            // --- Funktion til at lukke Modal ---
            function closeModal() {
                modalOverlay.classList.remove('is-visible');
                modalContainer.classList.remove('is-visible');
                document.body.classList.remove('body-no-scroll');
            }

            // Tilføj event listeners for at lukke modal
            if (modalCloseButton) modalCloseButton.addEventListener('click', closeModal);
            if (modalOverlay) modalOverlay.addEventListener('click', closeModal);


            // --- Funktion til at oprette et Grid Note Element ---
            function createGridNoteElement(noteData, index) {
                const article = document.createElement('article');
                article.className = 'note bg-white p-6 md:p-8 rounded-2xl note-shadow transform';
                article.dataset.title = noteData.title;
                article.dataset.fullText = noteData.fullText;

                const snippetDiv = document.createElement('div');
                snippetDiv.className = 'note-snippet';

                const titleH3 = document.createElement('h3');
                titleH3.className = 'font-playfair text-2xl font-semibold text-gray-800 mb-3';
                titleH3.textContent = noteData.title;

                const snippetP = document.createElement('p');
                snippetP.className = 'text-gray-600 leading-relaxed text-sm';
                snippetP.textContent = createSnippet(noteData.fullText); 

                snippetDiv.appendChild(titleH3);
                snippetDiv.appendChild(snippetP);
                article.appendChild(snippetDiv);

                article.addEventListener('click', () => {
                    openModal(article.dataset.title, article.dataset.fullText);
                });
                return article;
            }
            
            // --- Udfyld Skriv Grid ---
            const writingsGrid = document.querySelector('.writings-grid');
            if (writingsGrid) {
                writingsData.forEach((data, index) => {
                    const noteEl = createGridNoteElement(data, index);
                    writingsGrid.appendChild(noteEl);
                });
            }

            // --- Logik for Tilfældig Fremhævet Note ---
            const featuredNoteElement = document.getElementById('featured-note');
            const featuredTitleElement = document.getElementById('featured-title');
            const featuredSnippetElement = document.getElementById('featured-snippet-text');
            // const featuredContentFullSource = document.getElementById('featured-content-full-source'); // Ikke længere nødvendigt at gemme i DOM for featured note
            
            if (writingsData.length > 0 && featuredNoteElement) {
                const randomIndex = Math.floor(Math.random() * writingsData.length);
                const randomNoteData = writingsData[randomIndex];

                featuredTitleElement.textContent = randomNoteData.title;
                featuredSnippetElement.textContent = createSnippet(randomNoteData.fullText); 
                
                featuredNoteElement.dataset.title = randomNoteData.title;
                featuredNoteElement.dataset.fullText = randomNoteData.fullText;

                featuredNoteElement.addEventListener('click', () => {
                    openModal(featuredNoteElement.dataset.title, featuredNoteElement.dataset.fullText);
                });

            } else if (featuredNoteElement) {
                featuredTitleElement.textContent = "ingen skriv endnu";
                featuredSnippetElement.textContent = "tilføj nogle noter til samlingen nedenfor for at se en fremhævet her.";
            }

            // --- Anvend Forskudt Fade-in Animation på ALLE noter (Grid + Fremhævet) ---
            const allNoteDOMElements = document.querySelectorAll('.note'); 
            const observerOptions = {
                root: null, rootMargin: '0px', threshold: 0.1 
            };
            const scrollObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry) => { 
                    if (entry.isIntersecting) {
                        const actualIndex = Array.from(allNoteDOMElements).indexOf(entry.target);
                        entry.target.style.animation = `fadeInAnimation 0.5s ease-in-out ${actualIndex * 0.1}s forwards`;
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            allNoteDOMElements.forEach(note => {
                scrollObserver.observe(note);
            });

            const currentYearElement = document.getElementById('currentYear');
            if (currentYearElement) {
                currentYearElement.textContent = new Date().getFullYear();
            }
        });
    </script>

</body>
</html>